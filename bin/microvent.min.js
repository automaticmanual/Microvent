(function(e,t){typeof define=="function"&&define.amd?define("Microvent",[],t):typeof module!="undefined"&&module.exports?module.exports=t():e.Microvent=t()})(this,function(){(function(e,t){typeof define=="function"&&define.amd?define("Gizmo",[],t):typeof module!="undefined"&&module.exports?module.exports=t():e.Gizmo=t()})(this,function(){var e=function(){var e={construct:function(){var e=this.extend({},this);return this.mixin.apply(e,[].slice.call(arguments))},mixin:function(){return this.extend.apply(this,[this].concat([].slice.call(arguments)))},extend:function(e){var t,n;return t=[].slice.call(arguments,1),n=this,t.forEach(function(t){for(var r in t)n.has(t,r)&&(e[r]=t[r])}),e},has:function(e,t){return Object.hasOwnProperty.call(e,t)},keyByValue:function(e,t){for(var n in e)if(e[n]===t)return n}};return e}(),t=function(e){var t={construct:function(){return Object.create(this)},extend:function(t){return e.extend(Object.create(this),t)},instanceOf:function(e){var t=this;while(t){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1},"super":function(){var t,n,r;t=[].slice.call(arguments),n=e.keyByValue(this,arguments.callee.caller),r=this;if(!n)throw new Error("Unable to locate caller.");while(r){if(r[n]===this[n])me=r;else if(me&&r[n])return r[n].apply(this,t);r=Object.getPrototypeOf(r)}throw new Error("No super method of caller.")}};return t}(e),n=function(e){return e}(t);return n});var e=function(){var e={keys:Object.keys,exists:function(e){return e!==undefined&&e!==null},remove:function(e,t){var n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}};return e}(),t=function(e,t){var n={construct:function(){var e={_registry:{}};return this.extend(e)},set:function(e,t){return this._registry[e]=t,this},remove:function(e){return delete this._registry[e],this},has:function(e){return t.exists(this.get(e))},get:function(e){return this._registry[e]},keys:function(){return t.keys(this._registry)}};return e.extend(n)}(Gizmo,e),n=function(e){var t={construct:function(e,t,n,r){var i={type:e||"",target:t,emitter:n,listener:r,timeStamp:Date.now(),_propagating:!0};return this.extend(i)},stop:function(){return this._propagating=!1,this},isPropagating:function(){return this._propagating}};return e.extend(t)}(Gizmo),r=function(e,t,n,r){var i={construct:function(e){var t={_target:e,_registry:n.construct()};return this.extend(t)},getTarget:function(){return this._target||this},on:function(e,t){var n=this._registry.get(e)||[];return n.push(t),this._registry.set(e,n),this},once:function(e,t){var n=function(e,r){t(e,r),this.off(e.type,n)}.bind(this);return this.on(e,n)},off:function(e,n){var r=this._registry.get(e)||[];return n?this._registry.set(e,t.remove(r,n)):this._registry.remove(e),this},events:function(){return this._registry.keys()},unbind:function(){return this._registry=n.construct(),this},trigger:function(e,t){var n=this._registry.get(e)||[];for(var i in n){var s,o;s=n[i],o=r.construct(e,this.getTarget(),this,s),s(o,t);if(!o.isPropagating())break}return this}};return e.extend(i)}(Gizmo,e,t,n),i=function(e){return e}(r);return i});